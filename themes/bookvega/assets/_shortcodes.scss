.markdown {
  // {{< expand "Label" "icon" >}}
  .book-expand {
    margin-top: $padding-16;
    margin-bottom: $padding-16;

    border: $padding-1 solid var(--gray-200);
    border-radius: $border-radius;

    overflow: hidden;

    .book-expand-head {
      background: var(--gray-100);
      padding: $padding-8 $padding-16;
      cursor: pointer;
    }

    .book-expand-content {
      display: none;
      padding: $padding-16;
    }

    input[type="checkbox"]:checked + .book-expand-content {
      display: block;
    }
  }

  // {{< tabs >}}
  .book-tabs {
    margin-top: $padding-16;
    margin-bottom: $padding-16;

    border: $padding-1 solid var(--gray-200);
    border-radius: $border-radius;

    overflow: hidden;

    display: flex;
    flex-wrap: wrap;

    label {
      display: inline-block;
      padding: $padding-8 $padding-16;
      border-bottom: $padding-1 transparent;
      cursor: pointer;
    }

    .book-tabs-content {
      order: 999; //Move content blocks to the end
      width: 100%;
      border-top: $padding-1 solid var(--gray-100);
      padding: $padding-16;
      display: none;
    }

    input[type="radio"]:checked + label {
      border-bottom: $padding-1 solid var(--color-link);
    }
    input[type="radio"]:checked + label + .book-tabs-content {
      display: block;
    }
    input[type="radio"]:focus + label {
      @include outline;
    }
  }

  // {{< columns >}}

  .book-columns {
    margin-left: -$padding-16;
    margin-right: -$padding-16;

    > div {
      margin: $padding-16 0;
      min-width: $body-min-width / 2;
      padding: 0 $padding-16;
    }
  }

  @media screen and (max-width: $mobile-breakpoint) {
    .book-columns {
      margin-left: -$padding-16;
      margin-right: -$padding-16;
  
      > div {
        margin: $padding-16 0;
        // Setting this to not be /2 makes this work on mobile.
        min-width: $body-min-width; 
        padding: 0 $padding-16;
      }
    }
  }

  .book-columns2 {
    margin-left: -$padding-16;
    margin-right: -$padding-16;

    > div {
      min-width: $body-min-width / 2;
      padding: 0 $padding-16;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
  }

  @media screen and (max-width: $mobile-breakpoint) {
    .book-columns2 {
      margin-left: -$padding-16;
      margin-right: -$padding-16;
  
      > div {
        margin: $padding-16 0;
        // Setting this to not be /2 makes this work on mobile.
        min-width: $body-min-width; 
        padding: 0 $padding-16;
      }
    }
  }

  // {{< button >}}
  a.book-btn {
    display: inline-block;
    font-size: $font-size-14;
    color: var(--color-link);
    line-height: $padding-16 * 1.1;
    padding: .05em .5em;
    border: $padding-1 solid var(--color-link);
    border-radius: $border-radius;
    cursor: pointer;

    &:hover {
      text-decoration: none;
    }
  }

  button {
    display: inline-block;
    line-height: $padding-16 * 1.1;
    padding: .05em .5em;
    border: $padding-1 solid white;
    border-radius: $border-radius;
    background:none;
    height: 1.3em;
    font-size: 1rem;
    padding-top: 3px;
    color: white;
    border-color: white;
  }

  a.eng {
    color: #42b9f3;
    border: $padding-1 solid #42b9f3;
  }

  a.music {
    color: #c448c7;
    border: $padding-1 solid #c448c7;
  }

  a.phil {
    color: #e23838;
    border: $padding-1 solid #e23838;
  }

  a.design {
    color: #f78200;
    border: $padding-1 solid #f78200;
  }

  a.interview {
    color: #ffb900;
    border: $padding-1 solid #ffb900;
  }

  a.other {
    color: #5ebd3e;
    border: $padding-1 solid #5ebd3e;
  }

  a.blog {
    color: #42b9f3;
    border: $padding-1 solid #42b9f3;
  }

//  this is using https://codepen.io/mike-schultz/pen/NgQvGO which is MIT licenced from Mike Schultz

  a.gradient-border {
    border: #0000;
    color: #fff;
    --borderWidth: 1px;
    background: #222222;
    position: relative;
  }

  a.gradient-border:after {
    content: '';
    position: absolute;
    top: calc(-1 * var(--borderWidth));
    left: calc(-1 * var(--borderWidth));
    height: calc(100% + var(--borderWidth) * 2);
    width: calc(100% + var(--borderWidth) * 2);
    background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
    border-radius: calc(4 * var(--borderWidth));
    z-index: -1;
    animation: animatedgradient 5s ease alternate infinite;
    background-size: 300% 300%;
  }

  a.gradient-border::before {
    content: "Blog\00a0Posts";
    top: calc(-1 * var(--borderWidth));
    left: calc(-1 * var(--borderWidth));
    height: calc(100% + var(--borderWidth) * 2);
    width: calc(100% + var(--borderWidth) * 2);
    position: absolute;
    padding: 2px 0px 0px 10px;
    background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    animation: animatedgradient 5s ease alternate infinite;
    background-clip: text;
    color: transparent;
  }

  a.gradient-border2 {
    border: #0000;
    color: #fff;
    --borderWidth: 1px;
    background: #222222;
    position: relative;
  }
  a.gradient-border2:after {
    content: '';
    position: absolute;
    top: calc(-1 * var(--borderWidth));
    left: calc(-1 * var(--borderWidth));
    height: calc(100% + var(--borderWidth) * 2);
    width: calc(100% + var(--borderWidth) * 2);
    background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
    border-radius: calc(4 * var(--borderWidth));
    z-index: -1;
    animation: animatedgradient 5s ease alternate infinite;
    background-size: 300% 300%;
  }
  a.gradient-border2::before {
    content: '';
    top: calc(-1 * var(--borderWidth));
    left: calc(-1 * var(--borderWidth));
    height: calc(100% + var(--borderWidth) * 2);
    width: calc(100% + var(--borderWidth) * 2);
    position: absolute;
    padding: 2px 0px 0px 10px;
    background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    animation: animatedgradient 5s ease alternate infinite;
    background-clip: text;
    color: transparent;
  }
  
  
  @keyframes animatedgradient {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  // {{< hint >}}
  .book-hint {
    @each $name, $color in $hint-colors {
      &.#{$name} {
        border-color: $color;
        background-color: rgba($color, 0.1);
      }
    }
  }

  .attribution {
    line-height: 1;
    font-size: $font-size-12;
    padding-bottom: 20px;
  }

  .smalltext {
    line-height: 1;
    font-size: $font-size-12;
  }

div.quote, tr:nth-child(2n) {
	background-color: #00000033;
}

// Quotes

div.quote {
	border-bottom-right-radius: 2px;
	border-left: 4px solid #777;
	border-top-right-radius: 2px;
	margin: 2em 0;
	padding: 12px 24px 12px 30px;
	position: relative
}

div.quote:before {
	background-color: #222;
	border-radius: 100%;
	color: #fff;
	content: "\"";
	font-family: Dosis, Source Sans Pro, Helvetica Neue, Arial, sans-serif;
	font-size: 44px;
	font-weight: 700;
	left: -12px;
	line-height: 44px;
	position: absolute;
	height: 25px;
	width: 25px;
	text-align: center;
}

div.quote em {
	color: #fff
}

// Speech Bubbles

div.speech, tr:nth-child(2n) {
	background-color: #181818;
  z-index: -2;
}

div.speech {
  border-bottom-right-radius: 2px;
  border-left: 2px solid #777;
  border-top-right-radius: 2px;
  margin: 2em 40px;
  padding: 12px 24px 12px 70px;
  position: relative;
  width: 70%;
  border-radius: 5%;
  z-index: -2;
}

div.speech.right {
  border-bottom-right-radius: 2px;
  border-right: 2px solid #777;
  border-left: none;
  border-top-right-radius: 2px;
  margin: 2em 0;
  padding: 12px 70px 12px 20px;
  position: relative;
  width: 70%;
  border-radius: 5%;
  float: right;
  background-color: #333;
}

div.speech.big {
  width: 100% !important;
}

div.speech:before {
  background-color: #181818;
  background-image: url("/nonfree/character/opguidesSiplick.png");
  background-size: 75px;
  border-radius: 100%;
  border: 1px solid #777;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.boi:before {
  background-color: #181818;
  background-image: url("/nonfree/character/inhale.webp");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.triode:before {
  background-color: #181818;
  background-image: url("/nonfree/character/triode1.webp");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.furby:before {
  background-color: #181818;
  background-image: url("/nonfree/blog/furby.gif");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.usawi:before {
  background-color: #181818;
  background-image: url("/nonfree/permissiongranted/janusawi.webp");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.mimir:before {
  background-color: #181818;
  background-image: url("/nonfree/permissiongranted/mimir.webp");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.throw::before {
  background-color: #181818;
  background-image: url("/nonfree/character/throw.png");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.ai {
  width: 100% !important;
  background: linear-gradient(90deg, rgba(28, 36, 42, 0.9) 0%, rgba(30, 28, 23, 0.9) 100%), url(/common/texturebg2.webp) center center repeat;
}

div.speech.ai::before {
  background-image: url("/common/aichan2.webp");
  background-size: 75px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.ai::after {
  content: "AI GENERATED";
  font-family: Dosis, Source Sans Pro, Helvetica Neue, Arial, sans-serif;
  color: #515151;
  left: 25px;
  top: -12px;
  position: absolute;
  width: 15em;
}

div.speech.halo::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/halo.webp");
  background-size: 85px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.suit::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/suit.webp");
  background-size: 85px;
  border-radius: 30%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.math::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/math.webp");
  background-size: 75px;
  border-radius: 10%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.blegh::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/blegh.webp");
  background-size: 85px;
  border-radius: 10%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.hack::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/hack.webp");
  background-size: 79px;
  border-radius: 30%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.boba::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/boba.webp");
  background-size: 80px;
  border-radius: 30%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.yesbutno::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/yesbutno.webp");
  background-size: 78px;
  border-radius: 30%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.paper::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/paper.webp");
  background-size: 85px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.yeet::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/yeet.webp");
  background-size: 75px;
  border-radius: 30%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.tired::before {
  background-color: #181818;
  background-image: url("/nonfree/character/shade/tired.webp");
  background-size: 85px;
  border-radius: 100%;
  content: "";
  left: -40px;
  top: 4px;
  position: absolute;
  height: 75px;
  width: 75px;
}

div.speech.right::before {
  left: 92% !important;
  text-align: right;
}

div.speech em {
	color: #fff
}

.spoiler{ 
  color: #181818; 
  background-color:#181818;
}

.spoiler:hover { 
  background-color:#0000;
  color: #fff; 
}

}

div.egg{
  color: #b8dbcf;
  background-color: black;
  border: #b8dbcf;
  border-style: solid;
  border-radius: 25px;
  padding: 1em 1em 1em 1em;
}

div.egg::before, div.egg::after {
	content:'\A';
	white-space: pre-wrap;
  position:relative;
  display:block;
  height:10px;
  top:-100%;
  width: 102%;
  left:50%;
  z-index:1;
  transform:translateX(-50%);
  -webkit-transform:translateX(-50%);
	background-image: repeating-linear-gradient(-45deg, transparent, transparent 8px, #b8dbcf 5px, #b8dbcf 10px);
}

div.scifi_warning{
  color: #dbd822;
  background: 
  repeating-conic-gradient(#11110f 0 0.0001%,#000000 0 0.00015%) 
   220% 300%/400px 300px,
   repeating-conic-gradient(#0a0b04 0 0.00002%,#151408 0.34% 0.005%) 
   400% 30%/4100px 20px;
 background-blend-mode:difference;
  border: #676511;
  font-family:London Underground Regular;
  text-shadow: 0 0 2em #ebff34,
  0 0 3em #584c14,
  0 0 4em #ccd295a9;
  border-style: solid;
  border-radius: .3em;
  box-shadow: 5px 5px #FFFFFF19 inset;
  padding: 0em 1em 0em 1em;
}

div.scifi{
  color: #dbd822;
  background: 
  repeating-conic-gradient(#11110f 0 0.0001%,#000000 0 0.00015%) 
   220% 300%/400px 300px,
   repeating-conic-gradient(#0a0b04 0 0.00002%,#151408 0.34% 0.005%) 
   400% 30%/4100px 20px;
 background-blend-mode:difference;
  border: #676511;
  font-family:London Underground Regular;
  text-shadow: 0 0 2em #ebff34,
  0 0 3em #584c14,
  0 0 4em #ccd295a9;
  border-style: solid;
  border-radius: .3em;
  box-shadow: 5px 5px #FFFFFF19 inset;
  padding: 0em 1em 0em 1em;
}

/* Light theme section */
.light-section:before {
  content: '';
  position: absolute;
  top: -1em;
  left: -200%;
  width: 400%;
  height: 105%;
  z-index: -10;
  background: #eee;
  overflow: hidden;
  clip-path: polygon(1% 2%,
      3.5% 0.1%,
      8.9% 2.7%,
      16.2% 1.2%,
      19.7% 0.8%,
      24.7% 2%,
      31.2% 0%,
      35.9% 2.3%,
      40.6% 0.5%,
      47.1% 1.8%,
      49.9% 1%,
      53.8% 2.5%,
      62.2% 0.4%,
      67.3% 1.2%,
      70.3% 0.3%,
      75.8% 1.4%,
      78.5% 1.7%,
      84% 2.6%,
      91.1% 0.5%,
      93.6% 2.4%,
      97.3% 0.3%,
      98.9% 6%,
      98.1% 11.4%,
      98.6% 15.5%,
      97.3% 17.8%,
      97.7% 27.4%,
      98.3% 28.5%,
      99.7% 34.1%,
      98.8% 41.9%,
      98.3% 45.7%,
      98.4% 50.9%,
      98.7% 57.4%,
      99.6% 60.4%,
      99.4% 66.6%,
      99.2% 69.5%,
      97.4% 77.1%,
      98.1% 82.3%,
      99.9% 83.5%,
      98.2% 91.5%,
      99.3% 95.3%,
      98% 98.6%,
      93.6% 97.4%,
      90.3% 98.3%,
      86.8% 98.3%,
      78.6% 98.5%,
      76.4% 98.2%,
      69.7% 99.8%,
      64.2% 99.3%,
      61.8% 98.2%,
      57.2% 98.1%,
      48.7% 98.3%,
      46.8% 99%,
      39.6% 98.9%,
      33.8% 97.3%,
      28.2% 94.4%,
      27% 98.3%,
      22.1% 98.6%,
      13.1% 97.1%,
      8.7% 99.3%,
      2.7% 97.4%,
      2% 98.2%,
      2.1% 94.3%,
      0.7% 90.5%,
      0.9% 86.3%,
      2.2% 78.2%,
      0.4% 76.7%,
      1.2% 72.1%,
      2% 64%,
      1.4% 59.8%,
      0.4% 57.3%,
      0.3% 49.1%,
      2.9% 44.7%,
      1.9% 41.3%,
      0.8% 35.7%,
      2.9% 31.3%,
      0.8% 24.9%,
      2.7% 20.5%,
      0.8% 17.4%,
      2.5% 8.6%,
      1.1% 5.5%);
  filter: drop-shadow(-1px 6px 3px rgba(0, 0, 0, 0.5));
}

.light-section {
  position: relative;
  color: #020202;

  body,
    p {
      color: var(--text-color);
      font-family: 'Edu NSW ACT Foundation', cursive;
      font-size: 1.1em;
    }
  
    body {
      background-color: var(--body-background);
      background-image: linear-gradient(var(--body-background-fg) 2px, transparent 2px), linear-gradient(90deg, var(--body-background-fg) 2px, transparent 2px), linear-gradient(var(--body-background-fg) 1px, transparent 1px), linear-gradient(90deg, var(--body-background-fg) 1px, var(--body-background) 1px);
      background-size: 50px 50px, 50px 50px, 10px 10px, 10px 10px;
      background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
      color: var(--text-color);
    }
  
    h1 {
      text-shadow: none !important;
      font-family: 'Julius Sans One', sans-serif !important;
    }
  
    h2,
    h3,
    h4,
    h5,
    h6,
    nav {
      font-family: 'Julius Sans One', sans-serif !important;
      text-align: left !important;
      text-shadow: none !important;
    }
  
    h2 {
      border-bottom: 1px solid #aaaaaa;
    }
  
    a {
      font-family: 'Edu NSW ACT Foundation', cursive;
      text-shadow: 1px 1px 1px rgb(2, 55, 4);
      font-size: 1.02em;
    }
  
    aside nav ul li,
    .navbak {
      font-size: 14px !important;
      color: var(--body-background);
    }
  
    span {
      color: var(--text-color);
    }
  
    nav {
      background: #0000 !important;
    }
  
    iframe:not(.no-box) {
      box-shadow: 5px 5px 10px #888888;
    }
  
    .markdown div.speech {
      border-bottom-right-radius: 0px !important;
      border-left: 2px solid #ddd;
      border-top-right-radius: 0px !important;
      padding: 12px 24px 12px 70px;
      border-radius: 0% !important;
    }
  
    div.speech:before {
      background-color: #fffcf4 !important;
      background-image: url("/nonfree/character/opguidesSiplick.png");
      background-size: 75px;
      border: 1px solid #777;
      content: "";
      left: -40px;
      top: 4px;
      position: absolute;
      height: 75px;
      width: 75px;
    }
  
    div.speech,
    tr:nth-child(2n) {
      background-color: #fbfcee !important;
      box-shadow: 5px 5px 8px #888888;
    }
  
    div.speech.right {
      background-color: #f3f1f1 !important;
    }
  
    a.gradient-border2 {
      color: #000 !important;
      background: var(--body-background) !important;
    }
  
    div.speech.ai {
      width: 100% !important;
      background: linear-gradient(90deg, rgba(155, 198, 231, 0.9) 0%, rgba(243, 241, 234, 0.9) 100%), url(/common/texturebg2.webp) center center repeat !important;
    }
  
    ::-webkit-scrollbar-thumb {
      background: #ccc !important;
    }
  
    ::-webkit-scrollbar-track {
      background: #040;
    }
  
    .webhead {
      background: linear-gradient(90deg, #f78200 50%, #009cdf 75%) !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0;
    }
  
    .markdown {
      line-height: 1.6;
    }
  
    .book-menu a,
    .book-menu label {
      color: #000;
    }
  
    .book-page p {
      line-height: 1.7 !important;
    }
  
    dt,
    dd {
      display: inline-block;
      vertical-align: top;
      margin: 0;
      padding: 12px 10px 0 0;
      color: #000;
      font-size: small;
    }
  
    p.tip,
    tr:nth-child(2n) {
      background-color: #fdd;
    }
  
    dd.blogdd {
      color: #000 !important;
    }
  
    .markdown hr {
      height: 1px;
      background: #8880 !important;
      width: 50%;
      border-top: 2px dashed #888;
    }
  
    .markdown pre {
      background-color: #ff8c000b !important;
    }
  
    .dayquote {
      margin: 1em;
      overflow: hidden;
    }
  
    .dayquote {
      background-color: var(--body-background);
  
      margin: 0;
      padding: 1em;
      position: relative;
    }
  
    .spoiler:hover {
      background-color: var(--body-background) !important;
      color: var(--text-color) !important;
    }
  
    blockquote {
      background-color: #eef9fc !important;
      border: solid 1px #757575 !important;
    }
  
    .dayquote blockquote {
      background-color: var(--body-background) !important;
    }
  
    .dayquote blockquote:before {
      background-color: var(--body-background);
      bottom: 20%;
      content: "";
      left: 0px;
      position: absolute;
      right: 0;
      top: 20%;
      transform: rotate(-5deg) skew(70deg);
      z-index: 1;
    }
  
    .dayquote blockquote cite {
      display: block;
      font-style: italic;
      text-align: right;
    }
  
    .dayquote blockquote cite:before {
      content: "- ";
    }
  
    .dayquote blockquote>* {
      position: relative;
      z-index: 1;
    }
  
    .tip {
      background-color: #ffdfdfdc !important;
    }
  
    .popover {
      background: #eef9fc !important;
      border: 1px solid #555;
    }
  
    .popover::after {
      border-color: transparent transparent #555 transparent;
    }
  
    .popover::before {
      border-color: transparent transparent #333 transparent;
    }
  
    #webring-img,
    #logo {
      -webkit-filter: invert(1);
      filter: invert(1);
    }
  
    .quote {
      background-color: #fffa !important;
    }

    img{
      box-shadow: 5px 5px 10px #888888;
    }

    .lg-no-shadow {
      box-shadow: none;
    }
}